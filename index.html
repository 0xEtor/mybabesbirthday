<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday My Love!</title>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Dancing+Script:wght@700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Countdown Page -->
    <div id="countdown-page" class="container">
        <div class="countdown-container">
            <h1>üéâ Countdown to My Love's Special Day üéâ</h1>
            
            <div class="countdown-timer">
                <div class="time-unit">
                    <div class="time-value" id="days">00</div>
                    <div class="time-label">Days</div>
                </div>
                <div class="time-unit">
                    <div class="time-value" id="hours">00</div>
                    <div class="time-label">Hours</div>
                </div>
                <div class="time-unit">
                    <div class="time-value" id="minutes">00</div>
                    <div class="time-label">Minutes</div>
                </div>
                <div class="time-unit">
                    <div class="time-value" id="seconds">00</div>
                    <div class="time-label">Seconds</div>
                </div>
            </div>
            
            <div class="photo-placeholder">
                <img src="./images/Photoroom-20250104_193428.png" alt="My Love">
            </div>
            
            <button id="surprise-btn" disabled>Open Your Surprise üíù</button>
        </div>
        
        <!-- Floating elements -->
        <div class="floating heart" style="top: 10%; left: 10%;">‚ù§Ô∏è</div>
        <div class="floating heart" style="top: 20%; left: 85%;">‚ù§Ô∏è</div>
        <div class="floating heart" style="top: 70%; left: 15%;">‚ù§Ô∏è</div>
        <div class="floating flower" style="top: 80%; left: 80%;">üå∏</div>
        <div class="floating flower" style="top: 30%; left: 25%;">üåπ</div>
    </div>

    <!-- Birthday Page -->
    <div id="birthday-page" class="container">
        <canvas id="confetti-canvas"></canvas>
        
        <div class="birthday-container">
            <h2>Happy Birthday My Love! üéÇ‚ú®</h2>
            
            <div class="birthday-photo">
                <img src="images/beautified_rounded_centered.png" alt="My Love">
            </div>
            
            <div class="message-box">
                Wishing you endless happiness, love, and smiles today & forever üíï
            </div>
            
            <button id="back-btn">Forever With You Baby‚ù§Ô∏è</button>
        </div>
        
        <div class="music-control" id="music-toggle">
            <i class="fas fa-volume-up"></i>
        </div>
        
        <!-- Floating elements -->
        <div class="floating heart" style="top: 5%; left: 5%;">‚ù§Ô∏è</div>
        <div class="floating heart" style="top: 15%; left: 90%;">‚ù§Ô∏è</div>
        <div class="floating heart" style="top: 75%; left: 10%;">‚ù§Ô∏è</div>
        <div class="floating heart" style="top: 85%; left: 75%;">‚ù§Ô∏è</div>
        <div class="floating flower" style="top: 25%; left: 20%;">üåπ</div>
        <div class="floating flower" style="top: 65%; left: 85%;">üå∏</div>
        <div class="floating flower" style="top: 40%; left: 40%;">üå∫</div>
    </div>

    <audio id="bg-music" loop>
        <source src="./sound/happy-birthday.mp3" type="audio/mpeg">
    </audio>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Elements
            const countdownPage = document.getElementById('countdown-page');
            const birthdayPage = document.getElementById('birthday-page');
            const surpriseBtn = document.getElementById('surprise-btn');
            const backBtn = document.getElementById('back-btn');
            const daysEl = document.getElementById('days');
            const hoursEl = document.getElementById('hours');
            const minutesEl = document.getElementById('minutes');
            const secondsEl = document.getElementById('seconds');
            const musicToggle = document.getElementById('music-toggle');
            const bgMusic = document.getElementById('bg-music');
            const confettiCanvas = document.getElementById('confetti-canvas');
            
            // Set the context for the confetti canvas
            const ctx = confettiCanvas.getContext('2d');
            
            // Target date (September 21st of current year)
            const currentYear = new Date().getFullYear();
            let targetDate = new Date(currentYear, 8, 21); // Month is 0-indexed (8 = September)
            
            // For testing - uncomment the next line to set the target date to 10 seconds from now
            // targetDate = new Date(Date.now() + 10000);
            
            // Check if we're past September 21st this year
            const today = new Date();
            if (today > targetDate) {
                // If so, set target to next year
                targetDate.setFullYear(currentYear + 1);
            }
            
            // Countdown function
            function updateCountdown() {
                const now = new Date();
                const diff = targetDate - now;
                
                if (diff <= 0) {
                    // Countdown is over - show birthday page
                    showBirthdayPage();
                    return;
                }
                
                // Calculate time units
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);
                
                // Update DOM
                daysEl.textContent = days.toString().padStart(2, '0');
                hoursEl.textContent = hours.toString().padStart(2, '0');
                minutesEl.textContent = minutes.toString().padStart(2, '0');
                secondsEl.textContent = seconds.toString().padStart(2, '0');
                
                // Enable button if countdown is over
                if (diff <= 0) {
                    surpriseBtn.disabled = false;
                }
            }
            
            // Initial countdown update
            updateCountdown();
            
            // Update countdown every second
            const countdownInterval = setInterval(updateCountdown, 1000);
            
            // Show birthday page
            function showBirthdayPage() {
                clearInterval(countdownInterval);
                countdownPage.style.display = 'none';
                birthdayPage.style.display = 'flex';
                startConfetti();
                
                // Try to play music (with user interaction)
                bgMusic.volume = 0.5;
                const playPromise = bgMusic.play();
                
                if (playPromise !== undefined) {
                    playPromise.catch(error => {
                        console.log("Autoplay prevented: ", error);
                    });
                }
            }
            
            // Button event listeners
            surpriseBtn.addEventListener('click', showBirthdayPage);
            
            backBtn.addEventListener('click', function() {
                birthdayPage.style.display = 'none';
                countdownPage.style.display = 'flex';
                stopConfetti();
                bgMusic.pause();
                bgMusic.currentTime = 0;
                
                // Reset music icon
                musicToggle.innerHTML = '<i class="fas fa-volume-up"></i>';
                
                // Restart countdown
                updateCountdown();
                setInterval(updateCountdown, 1000);
            });
            
            // Music toggle
            let isMuted = false;
            musicToggle.addEventListener('click', function() {
                isMuted = !isMuted;
                
                if (isMuted) {
                    bgMusic.volume = 0;
                    musicToggle.innerHTML = '<i class="fas fa-volume-mute"></i>';
                } else {
                    bgMusic.volume = 0.5;
                    musicToggle.innerHTML = '<i class="fas fa-volume-up"></i>';
                }
            });
            
            // Confetti animation
            let confettiInterval;
            const confettiPieces = [];
            const colors = ['#ff6b6b', '#ff8e8e', '#ffde7d', '#a3f7bf', '#74b9ff'];
            
            function initConfetti() {
                confettiCanvas.width = window.innerWidth;
                confettiCanvas.height = window.innerHeight;
                
                // Create confetti pieces
                for (let i = 0; i < 150; i++) {
                    confettiPieces.push({
                        x: Math.random() * confettiCanvas.width,
                        y: -Math.random() * confettiCanvas.height,
                        size: Math.random() * 10 + 5,
                        color: colors[Math.floor(Math.random() * colors.length)],
                        speed: Math.random() * 3 + 2,
                        angle: Math.random() * 360,
                        rotation: Math.random() * 360,
                        rotationSpeed: Math.random() * 5 - 2.5
                    });
                }
            }
            
            function drawConfetti() {
                ctx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
                
                confettiPieces.forEach(confetto => {
                    ctx.save();
                    ctx.translate(confetto.x, confetto.y);
                    ctx.rotate(confetto.rotation * Math.PI / 180);
                    
                    ctx.fillStyle = confetto.color;
                    ctx.fillRect(-confetto.size / 2, -confetto.size / 2, confetto.size, confetto.size);
                    
                    ctx.restore();
                    
                    // Update position
                    confetto.y += confetto.speed;
                    confetto.x += Math.sin(confetto.angle * Math.PI / 180) * 2;
                    confetto.rotation += confetto.rotationSpeed;
                    
                    // Reset if out of screen
                    if (confetto.y > confettiCanvas.height) {
                        confetto.y = -confetto.size;
                        confetto.x = Math.random() * confettiCanvas.width;
                    }
                });
            }
            
            function startConfetti() {
                initConfetti();
                confettiInterval = setInterval(drawConfetti, 30);
            }
            
            function stopConfetti() {
                clearInterval(confettiInterval);
            }
            
            // Easter egg - tap heart 3 times
            let tapCount = 0;
            document.querySelectorAll('.heart, .flower').forEach(element => {
                element.addEventListener('click', function() {
                    tapCount++;
                    
                    if (tapCount >= 3) {
                        alert('You found the secret! üíñ You are the most amazing person in my life!');
                        tapCount = 0;
                    }
                    
                    // Reset tap count after 2 seconds
                    setTimeout(() => {
                        tapCount = 0;
                    }, 2000);
                });
            });
            
            // Responsive confetti canvas
            window.addEventListener('resize', function() {
                if (confettiCanvas) {
                    confettiCanvas.width = window.innerWidth;
                    confettiCanvas.height = window.innerHeight;
                }
            });
        });
    </script>
</body>
</html>